####################
### KEYBINDINGSS ###
####################
## See: 
# https://wiki.hyprland.org/Configuring/Keywords/ for more
# https://wiki.hyprland.org/Configuring/Binds/

# Switch to a submap called `resize`.
bind = ALT, R, submap, resize

# Start a submap called "resize".
submap = resize

# Set repeatable binds for resizing the active window.
$resizeFactor = 15
binde = , right, resizeactive, $resizeFactor 0
binde = , left, resizeactive, -$resizeFactor 0
binde = , up, resizeactive, 0 -$resizeFactor
binde = , down, resizeactive, 0 $resizeFactor

# Use `reset` to go back to the global submap
bind = , escape, submap, reset

# Reset the submap, which will return to the global submap
submap = reset
$mainMod = SUPER

$webapp = uwsm app -- chromium --new-window --ozone-platform=wayland --app
$CALENDAR = evolution

$prompt = ~/.bin/prompt.sh
# Launchers
bind = $mainMod, RETURN, exec, uwsm app -- $TERMINAL
bind = $mainMod SHIFT, C, killactive, 
bind = $mainMod SHIFT, Q, exec, $prompt "Exit Hyprland" hyprctl dispatch exit
bind = $mainMod, A, exec, $webapp="https://t3.chat/"
bind = $mainMod, D, exec, $webapp="https://app.todoist.com/app/today"
bind = $mainMod, Y, exec, $webapp="https://app.ynab.com"
bind = $mainMod, T, togglefloating, 
bind = $mainMod, R, exec, uwsm app -- rofi -show drun
bind = $mainMod, B, exec, uwsm app -- flatpak run app.zen_browser.zen
bind = $mainMod SHIFT, B, exec, uwsm app -- flatpak run app.zen_browser.zen --private-window
bind = $mainMod, E, exec, uwsm app -- $TERMINAL -e $TERMINAL_FILE_BROWSER
bind = $mainMod, S, exec, uwsm app -- $CALENDAR

# Window Management
#bind = $mainMod, h, movefocus, l
#bind = $mainMod, l, movefocus, r
bind = $mainMod, h, layoutmsg,mfact, 0.4
bind = $mainMod, l, layoutmsg,mfact, +0.5
bind = $mainMod, comma, focusmonitor, -1
bind = $mainMod, period, focusmonitor, +1
bind = $mainMod, o, movewindow, mon:+1
bind = $mainMod, f, fullscreen
bind = $mainMod, m, fullscreen, 1

bind = $mainMod, j, layoutmsg,cyclenext
bind = $mainMod, k, layoutmsg,cycleprev
bind = $mainMod, semicolon, layoutmsg,swapwithmaster

# Screenshots
$screenshotProgram = grimblast
bind =  ,Print,exec,$screenshotProgram copy area
bind =  $mainMod,Print,exec,$screenshotProgram save area
bind =  CTRL,Print,exec, $screenshotProgram save output
bind = alt,Print,exec,$screenshotProgram copy output

# typing
bind = $mainMod ALT,e,exec, ydotool type $PERSONAL_EMAIL

# Audio
$audioProgram = pulsemixer
$smallAudioIncrement = 10
$bigAudioIncrement = 25
bind = $mainMod SHIFT, l, exec, $audioProgram --toggle-mute
bind = $mainMod , Page_Up, exec, $audioProgram --change-volume +$smallAudioIncrement
bind = $mainMod SHIFT, Page_Up, exec, $audioProgram --change-volume +$bigAudioIncrement
bind = $mainMod , Page_Down, exec, $audioProgram --change-volume -$smallAudioIncrement
bind = $mainMod SHIFT, Page_Down, exec, $audioProgram --change-volume -$bigAudioIncrement

#  Power

# Note: needs passwordless reboot for this to work
bind = $mainMod, F11, exec, $prompt "reboot computer?" reboot
bind = $mainMod, F12, exec, $prompt "shutdown computer?" shutdown now

# Switch workspaces with mainMod + [0-9]
{% if yadm.class == "laptop" %}
$workspaceCommand = workspace,
{% else %}
$workspaceCommand = exec, ~/.bin/workspace.sh
{% endif %}
bind = $mainMod, 1,  $workspaceCommand 1
bind = $mainMod, 2,  $workspaceCommand 2
bind = $mainMod, 3,  $workspaceCommand 3
bind = $mainMod, 4,  $workspaceCommand 4
bind = $mainMod, 5,  $workspaceCommand 5

# Move active window to a workspace with mainMod + SHIFT + [0-9]
{% if yadm.class == "laptop" %}
bind = $mainMod SHIFT, 1, movetoworkspace, 1 
bind = $mainMod SHIFT, 2, movetoworkspace, 2 
bind = $mainMod SHIFT, 3, movetoworkspace, 3 
bind = $mainMod SHIFT, 4, movetoworkspace, 4 
bind = $mainMod SHIFT, 5, movetoworkspace, 5 
{% else %}
bind = $mainMod SHIFT, 1,exec, ~/.bin/workspace.sh 1 move
bind = $mainMod SHIFT, 2,exec, ~/.bin/workspace.sh 2 move
bind = $mainMod SHIFT, 3,exec, ~/.bin/workspace.sh 3 move
bind = $mainMod SHIFT, 4,exec, ~/.bin/workspace.sh 4 move
bind = $mainMod SHIFT, 5,exec, ~/.bin/workspace.sh 5 move

workspace=1,monitor:DP-2
workspace=2,monitor:DP-2
workspace=3,monitor:DP-2
workspace=4,monitor:DP-2
workspace=5,monitor:DP-2

workspace=6, monitor:DP-3
workspace=7, monitor:DP-3
workspace=8, monitor:DP-3
workspace=9, monitor:DP-3
workspace=10,monitor:DP-3
{% endif %}
# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
